

{% macro amount(value) %}
    {% if value.buy is not none %}
        {{ _self.amount(value.buy) }} &#8210; {{ _self.amount(value.sell) }}
    {% else %}
        {% set g = (value / 10000)|round(0, 'floor') %}
        {% set s = (value / 100)|round(0, 'floor') % 100 %}
        {% set c = value % 100 %}
        {% if g %}
            <span class="gold">{{ g }}</span>
            <span class="silver">{{ s }}</span>
            <span class="copper">{{ c }}</span>
        {% elseif s %}
            <span class="silver">{{ s }}</span>
            <span class="copper">{{ c }}</span>
        {% else %}
            <span class="copper">{{ c }}</span>
        {% endif %}
    {% endif %}
{% endmacro %}



{% macro character_bags(char, context) %}
    {% for bag in char.bags %}
        <div class="slots">
            <div class="bag">
                <div class="slot">
                    {% if bag.id %}
                        <span {{ bag|gwlink|raw }}>
                            <img src="{{ bag|image }}" />
                        </span>
                    {% else %}
                        <img src="{{ ""|image }}" class="nothing" />
                    {% endif %}
                </div>
            </div>

            {% for item in bag.inventory %}
                {{ _self.inventory_slot(item) }}
            {% endfor %}

        </div>
    {% endfor %}
{% endmacro %}



{% macro inventory_slot(item, context) %}
    <div class="slot rarity-{{ item.rarity }}">
        {% if item.id %}
            <span {{ item|gwlink|raw }}>
                <img src="{{ item|image }}" />
                {% if item.count > 1 %}
                    <span class="count">{{ item.count }}</span>
                {% endif %}
            </span>
        {% endif %}
    </div>
{% endmacro %}



{% macro specializations(build) %}
    {% for spe in build.specializations %}
        <b>{{ spe.name}}</b>
        <div class="specialization">
            <img src="{{ spe.background|image }}" class="background" />
            <img src="/assets/images/specialization-mask.png" class="mask" />
            {% for i, trait in spe.minortraits %}
                <div class="trait minor-{{ i+1 }}">
                    <img src="{{ trait.icon|image }}" {{ trait|gwlink|raw }} />
                </div>
            {% endfor %}
            {% for i, trait in spe.majortraits %}
                <div class="trait major-{{ i+1 }} {{ trait.selected ? '' : 'not-selected' }}">
                    <img src="{{ trait.icon|image }}" {{ trait|gwlink|raw }} />
                </div>
            {% endfor %}
        </div>
    {% endfor %}
{% endmacro %}